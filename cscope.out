cscope 15 $HOME/PL -q 0000000158 0000014972
	@fsa.cc

4 
	~<io¡»am
>

6 
	~"f§.h
"

8 
	#DISABLE_LOG
 
Œue


	)

9 
	#LOG
 \

10 ià(
DISABLE_LOG
è{} 
¡d
::
û¼


	)

12 
usšg
 
Çme¥aû
 
	g¡d
;

14 
boŞ
 
	$RunFSA
(cÚ¡ 
Fš™eS‹Autom©Ú
& 
f§
, cÚ¡ 
¡ršg
& 
¡r
) {

16 
m­
<
¡ršg
, sŒšg>::
™”©Ü
 
™”
;

17 
¡ršg
 
Œªs™iÚ
,
isfš®
;

18 
šdex
 = 0;

19 
šput
 = 
¡r
[0];

22 
¡ršg
 
cur_¡©e
 = 
	`Chªge_to_¡ršg
(1);

24 
¡r
[
šdex
] != '\0'){

26 
Œªs™iÚ
 = 
cur_¡©e
 + 
šput
;

28 
™”
 = 
f§
->
bË
.
	`fšd
(
Œªs™iÚ
);

30 if(
™”
 !ğ
f§
->
bË
.
	`’d
())

32 
cur_¡©e
 = 
™”
->
£cÚd
;

35  
çl£
;

37 
šdex
++;

39 
šput
 = 
¡r
[
šdex
];

42 
isfš®
 = 
cur_¡©e
;

44 
i
 = 0; i < 
f§
->
acû±
.
	`size
(); i++){

45 
j
 = 0; j < 
isfš®
.
	`size
(); j++){

46 if(
f§
->
acû±
[
i
] =ğ()(
isfš®
[
j
]-'0'))

47  
Œue
;

51  
çl£
;

52 
	}
}

54 
boŞ
 
BudFSA
(cÚ¡ 
¡d
::
veùÜ
<
FSATabËEËm’t
>& 
–em’ts
,

55 cÚ¡ 
¡d
::
veùÜ
<>& 
acû±_¡©es
,

56 
Fš™eS‹Autom©Ú
* 
f§
) {

58 
	g¡d
::
veùÜ
<
FSATabËEËm’t
>::
cÚ¡_™”©Ü
 
–em_™”
;

59 
	g¡d
::
veùÜ
<
–em
> 
¡Üage
;

60 
	gnç
 = 0;

65 
	g–em_™”
 = 
–em’ts
.
begš
();ƒËm_™” !ğ–em’ts.
’d
();ƒlem_iter++){

66 
–em
 
	gÃw_–em
;

68 
	gÃw_–em
.
	g¡©e
 = 
–em_™”
->
¡©e
;

69 
	gÃw_–em
.
	gÃxt_¡©e
 = 
–em_™”
->
Ãxt_¡©e
;

71 if(
	g–em_™”
->
	g¡r
.
size
() > 1){

72 
	gi
 = 0; i < 
	g¡r
.
size
(); i++){

73 
	gtmp
 = 
–em_™”
->
¡r
[
i
];

75 if(
	gi
 == 0){

76 
Ãw_–em
.
šput
 = 
tmp
;

79 
–em
 
	gtmp_–em
;

81 
	gtmp_–em
.
	g¡©e
 = 
–em_™”
->
¡©e
;

82 
	gtmp_–em
.
	gÃxt_¡©e
 = 
–em_™”
->
¡©e
;

83 
	gtmp_–em
.
	gšput
 = 
tmp
;

85 
	g¡Üage
.
push_back
(
tmp_–em
);

88 
	g¡Üage
.
push_back
(
Ãw_–em
);

91 if(
	g–em_™”
->
	g¡r
.
size
() == 0{

92 
Ãw_–em
.
šput
 = '';

94 
	g¡Üage
.
push_back
(
Ãw_–em
);

98 
	gtmp
 = 
–em_™”
[0];

100 
	gÃw_–em
.
	gšput
 = 
tmp
;

102 
	g¡Üage
.
push_back
(
Ãw_–em
);

109 
	gi
 = 0; i < 
	g¡Üage
.
size
(); i++){

110 if(
	g¡Üage
[
i
].
	gšput
 == ''){

111 
nç
 = 1;

116 
	gi
 = 0; i < 
	g¡Üage
.
size
(); i++){

117 
	gj
 = 
i
+1; j < 
	g¡Üage
.
	gsize
; j++){

119 if(
	g¡Üage
[
i
].
	g¡©e
 =ğ
¡Üage
[
j
].
¡©e
 && stÜage[i].
šput
 == storage[j].input){

120 
nç
 = 1;

124 if(
	gnç
)

131 if(!
	gnç
){

132 
¡ršg
 
	gŒªs™iÚ
, 
	gÃxt
;

135 
	gf§
->
	gš™Ÿl
 = 
Chªge_to_¡ršg
(1);

140 
	gi
 = 0; i < 
	g¡Üage
.
size
(); i++){

141 
	gŒªs™iÚ
 = 
Chªge_to_¡ršg
(
¡Üage
[
i
].
¡©e
è+ stÜage[i].
šput
;

142 
	gÃxt
 = 
Chªge_to_¡ršg
(
–em’ts
[
i
].
Ãxt_¡©e
);

143 
	gf§
->
	gbË
[
Œªs™iÚ
] = 
Ãxt
;

147 
	gi
 = 0; i < 
	gacû±_¡©es
.
size
(); i++){

148 
	gf§
->
	gacû±
.
push_back
(
acû±_¡©es
[
i
]);

154 
	gf§
->
	gš™Ÿl
 = 
Chªge_to_¡ršg
(
–em’ts
[0].
¡©e
);

155 
	gf§
->
	gš™Ÿl
 = 
Check_•sÚ
(
–em’ts
,ƒËm’ts[0].
¡©e
);

157 
	gi
 = 0; i < 
	g–em’ts
.
size
(); i++){

158 if(
	g–em’ts
[
i
].
	g¡r
.
em±y
() == 0)

159 
f§
->
®pha
.
š£¹
(
–em’ts
[
i
].
¡r
);

161 
Make_nç_bË
(
–em’ts
, 
f§
);

163 
	gi
 = 0; i < 
	gacû±_¡©es
.
size
() - 1; i++)

164 
	gf§
->
	gacû±
.
push_back
(
acû±_¡©es
[
i
]);

166 
	gLOG
 << "num_–em’ts: " << 
	g–em’ts
.
size
()

167 << ",‡cû±_¡©es: " << 
	gacû±_¡©es
.
size
(è<< 
	g’dl
;

168 if(
	g–em’ts
.
size
() <= 0)

169  
çl£
;

170  
	gŒue
;

172 
	g¡d
::
¡ršg
 
Check_•sÚ
(cÚ¡ 
¡d
::
veùÜ
<
FSATabËEËm’t
>& 
–em’ts
, 
¡©e
){

173 
	g¡ack
<> 
	g‹mp¡
;

174 
	g£t
<> 
	gvis™abË
;

175 
	g£t
<>::
™”©Ü
 
™”
;

176 
¡ršg
 
	g‹mp¡r
;

177 
	gt
, 
	g£tsize
;

180 
	g‹mp¡
.
push
(
¡©e
);

181 
	gvis™abË
.
š£¹
(
¡©e
);

183 !
	g‹mp¡
.
em±y
()){

184 
	gt
 = 
‹mp¡
.
tİ
();

185 
	g‹mp¡
.
pİ
();

187 
	gi
 = 0; i < 
	g–em’ts
.
size
(); i++){

188 if(
	g–em’ts
[
i
].
	g¡©e
 =ğ
t
 && 
–em’ts
[i].
¡r
 == ""){

189 
£tsize
 = 
vis™abË
.
size
();

190 
	gvis™abË
.
š£¹
(
–em’ts
[
i
].
Ãxt_¡©e
);

191 if(
	gvis™abË
.
size
(è!ğ
£tsize
)

192 
‹mp¡
.
push
(
–em’ts
[
i
].
Ãxt_¡©e
);

197 
	g™”
 = 
vis™abË
.
begš
(); i‹¸!ğvis™abË.
’d
(); iter++)

198 
	g‹mp¡r
.
­³nd
(
Chªge_to_¡ršg
(*
™”
));

200  
	g‹mp¡r
;

202 
	g¡d
::
¡ršg
 
Check_šput
(cÚ¡ 
¡d
::
veùÜ
<
FSATabËEËm’t
>& 
–em’ts
, 
¡©e
, sŒšg 
šput
){

203 
¡ršg
 
	gcur_¡©e
 = 
Check_•sÚ
(
–em’ts
, 
¡©e
);

204 
¡ršg
 
	g‹mp¡r
, 
	gtmp¡r
;

205 
	g£t
<> 
	g‹mp£t
;

206 
	g£t
<>::
™”©Ü
 
™”
;

207 
	gnum
,
	gÃxt_¡©e
;

209 
	gi
 = 0; i < 
	gcur_¡©e
.
size
(); i++){

210 
	gnum
 = ()(
cur_¡©e
.
©
(
i
) = '0');

211 
	gj
 = 0; j < 
	g–em’ts
.
size
(); j++){

212 if(
	gnum
 =ğ
–em’ts
[
j
].
¡©e
 && 
šput
.
com·»
ÓËm’ts[j].
¡r
) == 0){

213 
‹mp£t
.
š£¹
(
–em’ts
[
j
].
Ãxt_¡©e
);

218 
	g™”
 = 
‹mp£t
.
begš
(); i‹¸!ğ‹mp£t.
’d
(); iter++){

219 
	g‹mp¡r
 = 
Check_•sÚ
(
–em’ts
, *
™”
);

220 
	gj
 = 0; j < 
	g‹mp¡r
.
size
(); j++){

221 
	gÃxt_¡©e
 = ()(
‹mp¡r
.
©
(
j
) - '0');

222 
	g‹mp£t
.
š£¹
(
Ãxt_¡©e
);

225 
	g™”
 = 
‹mp£t
.
begš
(); i‹¸!ğ‹mp£t.
’d
(); iter++){

226 
	gtmp¡r
.
­³nd
(
Chªge_to_¡ršg
(*
™”
));

228  
	gtmp¡r
;

230 
	g¡d
::
¡ršg
 
Check_¡©e
(cÚ¡ 
¡d
::
veùÜ
<
FSATabËEËm’t
>& 
–em’ts
, std::¡ršg 
¡©e
, std::¡ršg 
šput
){

231 
cur_¡©e
,
	gÃxt_¡©e
;

232 
¡ršg
 
	gÃxt_¡©e_¡r
, 
	gvis™abË_¡r
;

233 
	g£t
<> 
	g‹mp£t
;

234 
	g£t
<>::
™”©Ü
 
™”
;

236 
	gi
 = 0; i < 
	g¡©e
.
size
(); i++){

237 
	gcur_¡©e
 = ()(
¡©e
.
©
(
i
) - '0');

238 
	gÃxt_¡©e_¡r
 = 
Check_šput
(
–em’ts
,
cur_¡©e
,
šput
);

240 
	gj
 = 0; j < 
	gÃxt_¡©e_¡r
.
size
(); j++){

241 
	gÃxt_¡©e
 = ()(
Ãxt_¡©e_¡r
.
©
(
j
) - '0');

242 
	g‹mp£t
.
š£¹
(
Ãxt_¡©e
);

245 
	g™”
 = 
‹mp£t
.
begš
(); i‹¸!ğ‹mp£t.
’d
(); iter++)

246 
	gvis™abË_¡r
.
­³nd
(
Chªge_to_¡ršg
(*
™”
));

248  
	gvis™abË_¡r
;

250 
Make_nç_bË
(cÚ¡ 
¡d
::
veùÜ
<
FSATabËEËm’t
>& 
–em’ts
, 
Fš™eS‹Autom©Ú
 *
f§
){

251 
	g¡ack
<
	g¡ršg
> 
	g‹mp¡
;

252 
	g£t
<>::
™”©Ü
 
™”
;

253 
	g£t
<
	g¡ršg
> 
	gexi¡
;

254 
¡ršg
 
	gcur_¡©e
 = 
f§
->
š™Ÿl
;

255 
¡ršg
 
	gŒª_¡©e
, 
	gÃxt_¡©e
;

257 
	g‹mp¡
.
push
(
cur_¡©e
);

258 
	gexi¡
.
š£¹
(
cur_¡©e
);

260 !
	g‹mp¡
.
em±y
()){

261 
	gcur_¡©e
 = 
‹mp¡
.
tİ
();

263 
	g‹mp¡
.
pİ
();

264 
	g™”
 = 
f§
->
®pha
.
begš
(); i‹¸!ğf§->®pha.
’d
(); iter++){

265 
	gÃxt_¡©e
 = 
Check_¡©e
(
–em’ts
, 
cur_¡©e
, *
™”
);

266 
	gŒª_¡©e
 = 
cur_¡©e
 + *
™”
;

267 
	gf§
->
	gbË
.
š£¹
(
m­
<
¡ršg
, sŒšg>::
v®ue_ty³
(
Œª_¡©e
, 
Ãxt_¡©e
));

269 if(
	gcur_¡©e
 !ğ
Ãxt_¡©e
 && 
exi¡
.
fšd
Òext_¡©eè=ğexi¡.
’d
()){

270 
‹mp¡
.
push
(
Ãxt_¡©e
);

271 
	gexi¡
.
š£¹
(
Ãxt_¡©e
);

277 
¡ršg
 
	$Chªge_to_¡ršg
(
num
){

278 
¡ršg
 
¡r
;

279 
c
;

281 
c
 = ()
num
 + '0';

282 
¡r
 = 
c
;

284  
¡r
;

285 
	}
}

	@fsa.h

4 #iâdeà
_PL_HOMEWORK_FSA_H_


5 
	#_PL_HOMEWORK_FSA_H_


	)

7 
	~<£t
>

8 
	~<¡ršg
>

9 
	~<m­
>

10 
	~<veùÜ
>

11 
	~<¡ack
>

16 
	sFSATabËEËm’t
 {

17 
	m¡©e
;

18 
	mÃxt_¡©e
;

19 
	m¡d
::
¡ršg
 
¡r
;

22 
	s–em
{

23 
	m¡©e
;

24 
	mÃxt_¡©e
;

25 
	mšput
;

28 
	sFš™eS‹Autom©Ú
 {

30 
	m¡d
::
veùÜ
<> 
acû±
;

31 
	m¡d
::
£t
<> 
®pha
;

32 
	m¡d
::
m­
<
¡d
::
¡ršg
, std::¡ršg> 
bË
;

36 
boŞ
 
RunFSA
(cÚ¡ 
Fš™eS‹Autom©Ú
& 
f§
, cÚ¡ 
¡d
::
¡ršg
& 
¡r
);

38 
boŞ
 
BudFSA
(cÚ¡ 
¡d
::
veùÜ
<
FSATabËEËm’t
>& 
–em’ts
,

39 cÚ¡ 
¡d
::
veùÜ
<>& 
acû±_¡©es
,

40 
Fš™eS‹Autom©Ú
* 
f§
);

41 
	g¡d
::
¡ršg
 
Check_•sÚ
(cÚ¡ 
¡d
::
veùÜ
<
FSATabËEËm’t
>& 
–em’ts
, 
¡©e
);

42 
	g¡d
::
¡ršg
 
Check_šput
(cÚ¡ 
¡d
::
veùÜ
<
FSATabËEËm’t
>& 
–em’ts
, 
¡©e
, std::¡ršg 
šput
);

43 
	g¡d
::
¡ršg
 
Check_¡©e
(cÚ¡ 
¡d
::
veùÜ
<
FSATabËEËm’t
>& 
–em’ts
, std::¡ršg 
¡©e
, std::¡ršg 
šput
);

44 
Make_nç_bË
(cÚ¡ 
¡d
::
veùÜ
<
FSATabËEËm’t
>& 
–em’ts
, 
Fš™eS‹Autom©Ú
 *
f§
);

45 
	g¡d
::
¡ršg
 
Chªge_to_¡ršg
(
num
);

	@fsa_main.cc

4 
	~<¡dio.h
>

5 
	~<¡ršg
>

6 
	~<¡ršg.h
>

7 
	~<io¡»am
>

8 
	~<s¡»am
>

9 
	~<veùÜ
>

11 
	~"f§.h
"

13 
usšg
 
Çme¥aû
 
	g¡d
;

15 
boŞ
 
LßdFSA
(cÚ¡ * 
f’ame
,

16 
veùÜ
<
FSATabËEËm’t
>* 
f§_–em’ts
,

17 
veùÜ
<>* 
acû±_¡©es
) {

18 
FILE
* 
	gå
 = 
fİ’
(
f’ame
, "rt");

19 ià(
	gå
 =ğ
NULL
è 
çl£
;

21 
	gf§_–em’ts
->
ş—r
();

22 
	gacû±_¡©es
->
ş—r
();

24 
	gbuf
[1024];

25 
fg‘s
(
buf
, 1024, 
å
);

26 
i¡ršg¡»am
 
iss
(
buf
);

27 
	giss
.
good
()) {

28 
	gacû±_¡©e
;

29 
	giss
 >> 
	gacû±_¡©e
;

30 
	gacû±_¡©es
->
push_back
(
acû±_¡©e
);

33 !
ãof
(
å
)) {

34 
FSATabËEËm’t
 
	g–em
;

35 
	g¡r_buf
[1024] = "";

36 ià(
fsÿnf
(
å
, "%d %d %s", &
–em
.
¡©e
, &–em.
Ãxt_¡©e
, 
¡r_buf
) < 3) {

39 ià(
¡rcmp
(
¡r_buf
, "#"è!ğ0è
–em
.
¡r
 = str_buf;

40 
	gf§_–em’ts
->
push_back
(
–em
);

42 
fşo£
(
å
);

43  
	gŒue
;

46 
	$maš
(
¬gc
, ** 
¬gv
) {

47 ià(
¬gc
 != 2) {

48 
û¼
 << "givehe FSA file.\n";

51 
veùÜ
<
FSATabËEËm’t
> 
f§_–em’ts
;

52 
veùÜ
<> 
acû±_¡©es
;

53 ià(
	`LßdFSA
(
¬gv
[1], &
f§_–em’ts
, &
acû±_¡©es
è=ğ
çl£
) {

54 
û¼
 << "uÇbËØlßdhFSA f" << 
¬gv
[1] << ".\n";

57 
Fš™eS‹Autom©Ú
 
f§
;

58 ià(
	`BudFSA
(
f§_–em’ts
, 
acû±_¡©es
, &
f§
è=ğ
çl£
) {

59 
û¼
 << "uÇbËØbudhFSA (" << 
¬gv
[1] << ").\n";

63 
¡ršg
 
šput_¡r
;

64 !
cš
.
	`eof
()) {

66 
cout
 << "> ";

67 
¡d
::
	`g‘lše
(
cš
, 
šput_¡r
);

68 
boŞ
 
acû±
 = 
	`RunFSA
(
f§
, 
šput_¡r
.
	`c_¡r
());

69 
cout
 << "šput: '" << 
šput_¡r
 << "' = " << (
acû±
? "O" : "X"è<< 
’dl
;

72 
	}
}

	@lr_parser.cc

4 
	~<as£¹.h
>

6 
	~<io¡»am
>

7 
	~<veùÜ
>

8 
	~<¡ack
>

10 
	~"Ì_·r£r.h
"

12 
	#DISABLE_LOG
 
çl£


	)

13 
	#LOG
 \

14 ià(
DISABLE_LOG
è{} 
¡d
::
û¼


	)

16 
usšg
 
Çme¥aû
 
	g¡d
;

18 
boŞ
 
BudLRP¬£r
(cÚ¡ 
¡d
::
veùÜ
<
LRTabËEËm’t
>& 
–em’ts
,

19 cÚ¡ 
¡d
::
veùÜ
<
LRRuË
>& 
ruËs
,

20 
LRP¬£r
* 
Ì_·r£r
) {

21 
	gi
 = 0; i < 
	g–em’ts
.
size
(); i++)

22 
	gÌ_·r£r
->
	gbË
.
push_back
(
–em’ts
[
i
]);

23 
	gi
 = 0; i < 
	gruËs
.
size
(); i++)

24 
	gÌ_·r£r
->
	gruËs
.
push_back
(
ruËs
[
i
]);

25  
	gŒue
;

28 
boŞ
 
	$RunLRP¬£r
(cÚ¡ 
LRP¬£r
& 
Ì_·r£r
, cÚ¡ 
¡d
::
¡ršg
& 
¡r
) {

29 
¡ack
<> 
Ì_¡ack
;

30 
cur
 = 0;

31 
pİ_num
 = 0;

32 
·œ
<
LRAùiÚ
, > 
tmp
;

33 
·œ
<
LRAùiÚ
, > 
g_tmp
;

34 
boŞ
 
dÙ
 = 
çl£
;

36 
Ì_¡ack
.
	`push
(0);

38 
cur
 !ğ
¡r
.
	`size
()){

39 
tmp
 = 
	`M©ch
(
Ì_·r£r
.
bË
, 
Ì_¡ack
.
	`tİ
(), 
¡r
[
cur
]);

40 if(
tmp
.
fœ¡
 =ğ
INVALID
)

41  
çl£
;

42 if(
tmp
.
fœ¡
 =ğ
SHIFT
){

43 
Ì_¡ack
.
	`push
(
¡r
[
cur
]);

44 
cur
++;

45 
Ì_¡ack
.
	`push
(
tmp
.
£cÚd
);

47 if(
tmp
.
fœ¡
 =ğ
REDUCE
){

48 
pİ_num
 = 
Ì_·r£r
.
ruËs
.
	`©
(
tmp
.
£cÚd
-1).
num_rhs
;

49 
i
 = 0; i < 
pİ_num
*2; i++)

50 
Ì_¡ack
.
	`pİ
();

52 
g_tmp
 = 
	`M©ch
(
Ì_·r£r
.
bË
, 
Ì_¡ack
.
	`tİ
(),†r_·r£r.
ruËs
.
	`©
(
tmp
.
£cÚd
-1).
lhs_symbŞ
);

54 if(
g_tmp
.
fœ¡
 =ğ
INVALID
)

55  
çl£
;

57 
Ì_¡ack
.
	`push
(
Ì_·r£r
.
ruËs
.
	`©
(
tmp
.
£cÚd
-1).
lhs_symbŞ
);

58 
Ì_¡ack
.
	`push
(
g_tmp
.
£cÚd
);

60 if(
tmp
.
fœ¡
 =ğ
ACCEPT
)

61  
Œue
;

64  
çl£
;

65 
	}
}

66 
	g·œ
<
	gLRAùiÚ
, > 
M©ch
(
veùÜ
<
LRTabËEËm’t
> 
bË
, 
¡©e
, 
symbŞ
){

67 
	gi
 = 0; i < 
	gbË
.
size
(); i++){

68 if(
	gbË
.
©
(
i
).
	g¡©e
 =ğ
¡©e
 && 
bË
.©(i).
symbŞ
 == symbol){

69  
make_·œ
(
bË
.
©
(
i
).
aùiÚ
,abË.©(i).
Ãxt_¡©e
);

72  
make_·œ
(
INVALID
, -1);

	@lr_parser.h

4 #iâdeà
_PL_HOMEWORK_LR_PARSER_H_


5 
	#_PL_HOMEWORK_LR_PARSER_H_


	)

7 
	~<¡ršg
>

8 
	~<veùÜ
>

10 
	eLRAùiÚ
 {

11 
	mINVALID
 = 0,

12 
	mSHIFT
 = 1,

13 
	mREDUCE
 = 2,

14 
	mACCEPT
 = 3,

15 
	mGOTO
 = 4

24 
	sLRTabËEËm’t
 {

25 
	m¡©e
;

26 
	msymbŞ
;

27 
LRAùiÚ
 
	maùiÚ
;

28 
	mÃxt_¡©e
;

31 
	sLRRuË
 {

32 
	mid
;

33 
	mlhs_symbŞ
;

34 
	mnum_rhs
;

37 
	sLRP¬£r
 {

39 
	m¡d
::
veùÜ
<
LRTabËEËm’t
> 
bË
;

40 
	m¡d
::
veùÜ
<
LRRuË
> 
ruËs
;

44 
boŞ
 
BudLRP¬£r
(cÚ¡ 
¡d
::
veùÜ
<
LRTabËEËm’t
>& 
–em’ts
,

45 cÚ¡ 
¡d
::
veùÜ
<
LRRuË
>& 
ruËs
,

46 
LRP¬£r
* 
Ì_·r£r
);

49 
boŞ
 
RunLRP¬£r
(cÚ¡ 
LRP¬£r
& 
Ì_·r£r
, cÚ¡ 
¡d
::
¡ršg
& 
¡r
);

50 
	g¡d
::
·œ
<
LRAùiÚ
, > 
M©ch
(
¡d
::
veùÜ
<
LRTabËEËm’t
> 
bË
, 
¡©e
, 
symbŞ
);

	@lr_parser_main.cc

4 
	~<¡dio.h
>

5 
	~<¡dlib.h
>

7 
	~<io¡»am
>

8 
	~<s¡»am
>

9 
	~<¡ršg
>

10 
	~<veùÜ
>

12 
	~"Ì_·r£r.h
"

14 
usšg
 
Çme¥aû
 
	g¡d
;

16 
boŞ
 
LßdLRTabË
(cÚ¡ * 
f’ame
,

17 
veùÜ
<
LRTabËEËm’t
>* 
–em’ts
, veùÜ<
LRRuË
>* 
ruËs
) {

18 
FILE
* 
	gå
 = 
fİ’
(
f’ame
, "rt");

19 ià(
	gå
 =ğ
NULL
è 
çl£
;

21 
	g–em’ts
->
ş—r
();

22 
	gruËs
->
ş—r
();

24 
	gnum_–em’ts
, 
	gnum_ruËs
;

25 ià(
fsÿnf
(
å
, "%d %d", &
num_–em’ts
, &
num_ruËs
è< 2è 
	gçl£
;

27 
	gi
 = 0; i < 
	gnum_–em’ts
; ++i) {

28 
LRTabËEËm’t
 
	g–em
;

29 
	gaùiÚ
, 
	gsymbŞ
[64];

30 ià(
fsÿnf
(
å
, "%d %s %c %d",

31 &
–em
.
¡©e
, 
symbŞ
, &
aùiÚ
, &–em.
Ãxt_¡©e
) < 4) {

34 
	g–em
.
	gaùiÚ
 = (
aùiÚ
 =ğ'S' ? 
SHIFT
 :‡ùiÚ =ğ'R' ? 
REDUCE
 :

35 
aùiÚ
 =ğ'G' ? 
GOTO
 :‡ùiÚ =ğ'A' ? 
ACCEPT
 : 
INVALID
);

36 ià(
	g–em
.
	gaùiÚ
 =ğ
GOTO
è
–em
.
symbŞ
 = 
©oi
(symbol);

37 ià(
	g–em
.
	gaùiÚ
 =ğ
INVALID
è
–em
.
symbŞ
 = 0;

38 
	g–em
.
	gsymbŞ
 = 
symbŞ
[0];

39 
	g–em’ts
->
push_back
(
–em
);

41 
	gi
 = 0; i < 
	gnum_ruËs
; ++i) {

42 
LRRuË
 
	gruË
;

43 ià(
fsÿnf
(
å
, "%d %d %d", &
ruË
.
id
, &ruË.
lhs_symbŞ
, &ruË.
num_rhs
) < 3) {

46 
	gruËs
->
push_back
(
ruË
);

48 
fşo£
(
å
);

49  
	gŒue
;

52 
	$maš
(
¬gc
, ** 
¬gv
) {

53 ià(
¬gc
 != 2) {

54 
û¼
 << "givehe LRable file.\n";

57 
veùÜ
<
LRTabËEËm’t
> 
–em’ts
;

58 
veùÜ
<
LRRuË
> 
ruËs
;

59 ià(
	`LßdLRTabË
(
¬gv
[1], &
–em’ts
, &
ruËs
è=ğ
çl£
) {

60 
û¼
 << "uÇbËØlßdhLRabË f" << 
¬gv
[1] << ".\n";

63 
LRP¬£r
 
Ì_·r£r
;

64 ià(
	`BudLRP¬£r
(
–em’ts
, 
ruËs
, &
Ì_·r£r
è=ğ
çl£
) {

65 
û¼
 << "uÇbËØbudhLR…¬£¸(" << 
¬gv
[1] << ").\n";

69 
¡ršg
 
šput_¡r
;

70 !
cš
.
	`eof
()) {

72 
cout
 << "> ";

73 
¡d
::
	`g‘lše
(
cš
, 
šput_¡r
);

74 
šput_¡r
 += "$";

75 
boŞ
 
acû±
 = 
	`RunLRP¬£r
(
Ì_·r£r
, 
šput_¡r
);

76 
cout
 << "šput: '" << 
šput_¡r
 << "' = " << (
acû±
? "O" : "X"è<< 
’dl
;

79 
	}
}

	@regexp_main.cc

4 
	~<¡dio.h
>

6 
	~<io¡»am
>

7 
	~<s¡»am
>

8 
	~<¡ršg
>

9 
	~<veùÜ
>

11 
	~"»gexp_m©ch”.h
"

13 
usšg
 
Çme¥aû
 
	g¡d
;

15 
	$maš
(
¬gc
, ** 
¬gv
) {

16 ià(
¬gc
 != 2) {

17 
û¼
 << "givehe„egexp…attern.\n";

20 
RegExpM©ch”
 
»gexp
;

21 ià(
	`BudRegExpM©ch”
(
¬gv
[1], &
»gexp
è=ğ
çl£
) {

22 
û¼
 << "uÇbËØbudhm©ch” from„egex°'" << 
¬gv
[1] << "'.\n";

26 
¡ršg
 
šput_¡r
;

27 !
cš
.
	`eof
()) {

29 
cout
 << "> ";

30 
¡d
::
	`g‘lše
(
cš
, 
šput_¡r
);

31 
boŞ
 
acû±
 = 
	`RunRegExpM©ch”
(
»gexp
, 
šput_¡r
.
	`c_¡r
());

32 
cout
 << "šput: '" << 
šput_¡r
 << "' = " << (
acû±
? "O" : "X"è<< 
’dl
;

35 
	}
}

	@regexp_matcher.cc

4 
	~"»gexp_m©ch”.h
"

6 
boŞ
 
	$BudRegExpM©ch”
(cÚ¡ * 
»gexp
, 
RegExpM©ch”
* 
»gexp_m©ch”
) {

7  
çl£
;

8 
	}
}

10 
boŞ
 
	$RunRegExpM©ch”
(cÚ¡ 
RegExpM©ch”
& 
»gexp_m©ch”
, cÚ¡ * 
¡r
) {

11  
çl£
;

12 
	}
}

	@regexp_matcher.h

4 #iâdeà
_PL_HOMEWORK_REGEXP_MATCHER_H_


5 
	#_PL_HOMEWORK_REGEXP_MATCHER_H_


	)

7 
	~"Ì_·r£r.h
"

8 
	~"f§.h
"

9 
	~<¡ack
>

11 
	sRegExpM©ch”
 {

13 
	m¡d
::
¡ack
 <
¡d
::
·œ
 <,> > 
	mNFA_æake
;

14 
Fš™eS‹Autom©Ú
 
	mf§
;

15 
LRP¬£r
 
	mÌ_·r£r
;

19 
boŞ
 
BudRegExpM©ch”
(cÚ¡ * 
»gexp
, 
RegExpM©ch”
* 
»gexp_m©ch”
);

22 
boŞ
 
RunRegExpM©ch”
(cÚ¡ 
RegExpM©ch”
& 
»gexp_m©ch”
, cÚ¡ * 
¡r
);

	@
1
.
0
9
118
fsa.cc
fsa.h
fsa_main.cc
lr_parser.cc
lr_parser.h
lr_parser_main.cc
regexp_main.cc
regexp_matcher.cc
regexp_matcher.h
